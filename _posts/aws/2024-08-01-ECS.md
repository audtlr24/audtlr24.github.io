---
layout: post
title: ECS
date: 2024-08-01 12:00:00 +0000
categories: aws
---
### ECS (Elastic Container Service)

AWS 에서 제공하는 컨테이너 오케스트레이션 서비스로 Docker 컨테이너를 쉽게 관리하고 배포할 수 있도록 지원

### ECS 개념

클러스터
- ECS 에서 컨테이너 인스턴스를 그룹화하여 관리하는 논리적인 단위
- 클러스터 내에서 Task 와 Service 가 실행됨

Task Definition
- 컨테이너를 어떻게 실행할지에 대한 명세
- 사용할 Docker 이미지
- CPU, 메모리, 네트워크 모드(ex - Fargate), 환경변수 등이 포함됨

Task
- ECS 에서 실행되는 컨테이너 인스턴스
- Task Definition 을 기반으로 생성됨
- 여러개의 Task 가 실행될 수 있음

Service
- 지정된 수의 작업을 지속적으로 실행
- auto scaling, 로드밸런싱에 관여

### ECS 에서 고려할 옵션들

실행모드
- EC2 Launch Type
	- EC2 인스턴스를 사용하여 컨테이너를 실행함
	- 직접 인스턴스를 관리하기 때문에 커스터마이징이 가능
- Fargate Launch Type
	- 서버리스 방식으로 AWS 가 인프라를 자동으로 관리
	- 리소스 요구사항 정의만으로 쉽게 인프라 구축 가능

네트워크
- VPC
	- VPC 내에서만 작업이 실행됨
	- 서브넷과 보안그룹을 통해 네트워크 제어 
- 서비스 디스커버리
	- 서비스 간 통신을 위한 DNS 네임을 등록하고 관리

Auto Scaling
- CloudWatch 알람과 함께 자동 스케일링을 설정 할 수 있음
- 수요에 따라 task 수를 조절

### vs EC2

|특성|ECS on EC2|EC2 인스턴스 직접 사용|
|---|---|---|
|**관리 오버헤드**|ECS 관리 콘솔을 통해 작업과 서비스 관리|수동으로 인프라를 설정 및 관리|
|**확장성**|자동 스케일링 및 로드 밸런싱 지원|수동으로 확장 및 부하 분산 설정|
|**비용 관리**|작업 단위로 비용이 청구되며, EC2 인스턴스 비용 발생|EC2 인스턴스 사용량에 따른 비용 발생|
|**보안 관리**|IAM 역할 및 정책을 통해 세밀한 권한 관리 가능|보안 그룹 및 IAM 설정 필요|
|**유연성 및 제어**|작업 정의를 통한 세밀한 컨테이너 설정 가능|인스턴스 레벨에서 세밀한 제어 가능|

### vs EKS

| 특성               | ECS                         | EKS                                   |
| ---------------- | --------------------------- | ------------------------------------- |
| **관리형 서비스**      | AWS 관리형 서비스로, 간단한 설정과 배포 가능 | Kubernetes 관리형 서비스로, Kubernetes 경험 필요 |
| **컨테이너 오케스트레이션** | Docker 컨테이너를 간단하게 관리        | Kubernetes를 사용하여 복잡한 컨테이너 워크로드 관리     |
| **확장성**          | 자동 스케일링 및 로드 밸런싱 지원         | Kubernetes 오토스케일링 및 다양한 네트워킹 옵션 지원    |
| **유연성**          | ECS 서비스 및 작업 정의 기반          | Kubernetes API 및 에코시스템 활용 가능          |
| **커뮤니티 및 생태계**   | AWS 중심의 기능 제공               | Kubernetes 생태계와의 호환 및 오픈 소스 도구 사용 가능  |
